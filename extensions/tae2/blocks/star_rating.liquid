

{% schema %}
{
  "name": "Star Rating Test 4",
  "target": "body",
  "settings": [
    { "type": "product", "id": "product", "label": "product", "autofill": true },
    { "type": "color", "id": "colour", "label": "Star Colour", "default": "#ff0000" }
  ]
}
{% endschema %}


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const audio = new Audio('https://www.soundjay.com/buttons/button-17.mp3');
    document.body.addEventListener('click', function (e) {
      const target = e.target;

      // Try to detect add-to-cart button
      if (target.matches('form[action*="/cart/add"] [type="submit"], button[name="add"], .add-to-cart')) {
        // play the song
        audio.play().catch(err => {
          console.warn("Audio play was interrupted:", err);
        });
      }
    });
  });
</script>
